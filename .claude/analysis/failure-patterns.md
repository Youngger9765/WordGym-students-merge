# AI 修复失败模式分析报告

## 数据来源
- 分析周期：2025-12-22 至 2025-12-26
- 总 Issues：23 个
- 多次修复 Issues：4 个 (#4, #3, #9, #19)
- 客户反馈次数：6 次

---

## 失败模式分类

### Pattern 1: 需求理解偏差（未仔细阅读客户要求）

**案例：Issue #4 - 单字卡顺序错误**

| 维度 | 详情 |
|------|------|
| 客户明确要求 | "正確順序：1. 單字 2. 影片 3. 詞性與關聯字 GROUP 4. 匯出內容" |
| AI 第1次实施 | 影片 → 例句（独立） → 同义字 → 词性变化 |
| 失败原因 | **AI 没有按照客户明确指定的顺序，而是根据自己的理解排列** |
| 客户反馈 | "單字卡順序仍有錯誤" |
| Root Cause | AI 忽略了客户在 issue 中明确列出的顺序要求 |

**5 Whys 分析（AI 自己写的）：**
```
Why #3: 為什麼沒有在第一次就理解案主的需求？
Answer: AI 沒有仔細閱讀案主在 Issue #4 中明確指定的順序要求

Why #5 (根本原因): 
AI 沒有按照案主明確指定的順序實施，而是根據自己的理解排列區塊
```

**改进建议：**
- ✅ 需求解析 Agent：在实施前，强制提取客户明确要求
- ✅ 需求确认环节：实施前向客户复述理解，等待确认
- ✅ Checklist 验证：客户要求的每一点都要对应实施

---

### Pattern 2: 策略选择错误（技术方案不对）

**案例：Issue #3 - 国中高中标签混在一起**

| 维度 | 详情 |
|------|------|
| 问题描述 | 国中和高中的单字标签混在一起显示 |
| AI 第1次策略 | 修改数据合并逻辑（复合 key: `word_stage`） |
| 失败原因 | **技术方案错误，应该在显示层过滤，而非数据层分离** |
| 客户反馈 | "以標籤內容來看，國中和高中仍是混在一起" |
| AI 第2次策略 | 保持数据合并，在 UI 层过滤显示 |
| 结果 | ✅ 测试通过 |

**Root Cause：**
- AI 一开始选择了错误的技术方案
- 应该先分析问题是"数据层"还是"显示层"
- 过早优化（数据层分离）导致复杂度增加

**改进建议：**
- ✅ 方案评估 Agent：实施前评估多个技术方案
- ✅ KISS 原则：优先选择最简单的方案
- ✅ 影响面分析：评估方案对其他功能的影响

---

### Pattern 3: Chrome 验证不足（验证项目不全）

**案例：Issue #4 - Chrome 验证通过但客户仍不满意**

| 维度 | 详情 |
|------|------|
| AI Chrome 验证 | ✅ "影片正确嵌入并可播放" |
| 客户反馈 | ❌ "單字卡順序仍有錯誤" |
| 问题 | **AI 只验证了"有没有影片"，没有验证"顺序对不对"** |

**Root Cause：**
- Chrome 验证的 checklist 不完整
- 只验证了部分功能，没有覆盖客户关心的重点

**改进建议：**
- ✅ 客户需求 → 验证 checklist 映射
- ✅ 验证项目必须覆盖客户所有要求
- ✅ 截图对比：BEFORE vs AFTER

---

### Pattern 4: 缺少客户澄清环节（需求模糊时盲目猜测）

**案例：Issue #19 - 闪卡正反面宽度**

| 维度 | 详情 |
|------|------|
| 客户原始要求 | "正面和反面的寬度一樣" |
| AI 第1次猜测 | max-width: 600px |
| 客户反馈 | "你改壞了" |
| AI 第2次猜测 | max-width: 900px |
| 客户反馈 | "你改壞了，正反面的寬度還是不一樣，且反面改動寬度，導致句子斷行" |
| AI 第3次行动 | ✅ **停止猜测，发布澄清评论** |

**Root Cause：**
- 客户要求模糊："上一個版本"没有明确是哪个版本
- AI 盲目猜测技术实现（600px vs 900px）
- 缺少"澄清需求"环节

**改进建议（已实施）：**
- ✅ Failed Fix Principle：2次失败后强制澄清
- ✅ 澄清模板：提供选项让客户选择
- ❌ 更好的做法：**第1次就应该澄清模糊需求**

---

### Pattern 5: 根因分析不彻底（治标不治本）

**案例：Issue #15/16 - 题目选项有词性标注**

| 维度 | 详情 |
|------|------|
| 问题表现 | 题目选项显示 "appearance (n.) [C]" |
| AI 第1次方案 | 在 UI 层清理（MultipleChoiceQuiz）|
| 客户指出根因 | "應該在源頭清理（csv_to_json.py）" |
| AI 第2次方案 | ✅ 修改 CSV 转换器，源头清理 |

**Root Cause：**
- AI 习惯性在症状处修复（UI 层）
- 没有追溯到根本原因（数据源）
- 缺少"5 Whys"思维

**改进建议（已部分实施）：**
- ✅ 5 Whys 强制执行（已有 rule）
- ✅ 红旗检测：修复超过3个地方 = 方向错误
- ❌ 更好的做法：**修复前先 5 Whys 分析**

---

## 失败模式总结表

| Pattern | 失败原因 | 出现次数 | 严重程度 |
|---------|----------|----------|----------|
| 1. 需求理解偏差 | 没有仔细阅读客户要求 | 2次 (#4, #9) | 🔴 高 |
| 2. 策略选择错误 | 技术方案选择不当 | 1次 (#3) | 🟡 中 |
| 3. Chrome 验证不足 | 验证项目不全面 | 2次 (#4, #19) | 🟡 中 |
| 4. 缺少澄清环节 | 需求模糊时盲目猜测 | 1次 (#19) | 🔴 高 |
| 5. 根因分析不彻底 | 治标不治本 | 1次 (#15/16) | 🟡 中 |

---

## 成功案例分析

### Issue #19 - Failed Fix Principle 成功应用

**时间线：**
1. 第1次修复失败（600px）
2. 第2次修复失败（900px）
3. ✅ **停止第3次猜测，发布澄清评论**

**成功要素：**
- ✅ 执行了 Failed Fix Principle
- ✅ 发布了结构化的澄清问题（3个具体问题）
- ✅ 等待客户回复，而非继续盲目尝试

**效果：**
- 避免了第3次、第4次失败
- 给客户专业印象："我需要理解你的需求"

---

## 下一步行动

### 1. 创建预防性 Skill/Agent
### 2. 设计验证方法（盲测）
### 3. 构建迭代循环系统

