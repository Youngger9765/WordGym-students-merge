# 快速行动计划

**用时**: 5分钟快速理解
**目标**: 知道下一步做什么
**针对**: 项目维护者

---

## 三句话总结

1. **问题**: 多个修复声称"已修复"，但客户测试仍有问题
2. **原因**: Check阶段缺少强制的生产环境验证
3. **解决**: 实施新的Chrome验证流程和测试规范

---

## 立即要做的三件事

### 1️⃣ 理解Issue #31的真问题

**打开**: `.claude/ISSUE_31_ROOT_CAUSE_ANALYSIS.md`

**关键发现**:
```
问题: 国中/高中数据混在一起
根因: vocabulary.json有49%的词缺少stage信息
错误修复: 只是排除这些词，而不是补充stage数据
结果: 丢失了3237个词汇，客户体验更差
```

**应该做的**:
- [ ] 诊断这3237个词来自何处
- [ ] 选择修复方案：补充stage vs 删除 vs 允许无stage
- [ ] 实施并验证

### 2️⃣ 建立强制的Chrome验证流程

**打开**: `.claude/rules/chrome-verification-enforcement.md`

**核心规则**:
```
没有Chrome验证报告 = Pull Request无法合并 = Issue无法关闭
```

**实施方式**:
1. Check阶段新增: 生产环境Chrome验证
2. 必须提供BEFORE/AFTER截屏
3. 必须提交验证报告

**模板**: 在规范文件中已提供（复制粘贴使用）

### 3️⃣ 为核心功能编写测试

**现在缺失**:
```
src/utils/filterUtils.ts  ← 没有测试（但有严重bug）
```

**应该做的**:
```
创建: src/utils/__tests__/filterUtils.test.ts

测试内容:
- stage分离是否严格（国中≠高中）
- 无stage词的处理是否一致
- 多条件组合是否正常
```

---

## 针对4个失败Issues的行动

### Issue #31 - 国中/高中混合

**状态**: 声称修复，但仍有问题

**下一步**:
1. 读 `.claude/ISSUE_31_ROOT_CAUSE_ANALYSIS.md`
2. 执行诊断步骤（在生产环境验证现状）
3. 分析3237个无stage词
4. 选择修复方案并实施
5. 提交Chrome验证报告

**关键**: 不能只改filterUtils，要修复源数据

### Issue #27 - 例句显示错误

**状态**: 例句有加回但UI错误

**下一步**:
1. 访问生产环境验证
2. 截屏：修复前 vs 修复后
3. 检查: 5个例句是否都显示？布局对吗？
4. 提交验证报告或返回修复

**关键**: 提供视觉证据

### Issue #25 - 冊次级联无效

**状态**: 修复声称成功，但功能无效

**下一步**:
1. 编写测试验证级联逻辑
2. 实际测试：选不同冊次→课次列表是否更新
3. 页面刷新→预设值是否保持
4. 提交Chrome验证报告

**关键**: 完整的用户流程测试

### Issue #26 - 样式不一致

**状态**: 修复了某个尺寸，但整体仍不一致

**下一步**:
1. 多屏幕尺寸截屏（375/768/1024/1920px）
2. 对比样式一致性
3. 检查是否有副作用
4. 提交验证报告

**关键**: 响应式设计的完整验证

---

## 新建文件使用指南

### 主要文档

| 文件 | 用途 | 何时阅读 |
|------|------|---------|
| `FAILURE_ANALYSIS_REPORT.md` | 失败原因总结 | 理解系统问题 |
| `WORKFLOW_IMPROVEMENT_SUMMARY.md` | 改进方案总结 | 理解新流程 |
| `ISSUE_31_ROOT_CAUSE_ANALYSIS.md` | Issue #31详细分析 | 修复Issue #31 |

### 规范文件

| 文件 | 用途 | 何时遵循 |
|------|------|---------|
| `rules/production-testing-mandatory.md` | 生产环境测试强制规范 | 所有修复 |
| `rules/chrome-verification-enforcement.md` | Chrome验证强制流程 | Check阶段 |

### 下一步修改

这些文件需要更新以实施新流程：

- [ ] `agents/git-issue-pr-flow.md` - 添加Check阶段的Chrome验证
- [ ] `agents/tdd-validator-agent.md` - 强制编写测试
- [ ] `agents/code-reviewer.md` - 检查test覆盖

---

## 每个Issue的验证清单

### 填写模板（复制粘贴到Issue评论）

```markdown
## Chrome 生产环境验证报告

**修复内容**: [简述]
**验证时间**: [时间]

### 验证环境
- URL: https://youngger9765.github.io/WordGym-students-merge/
- 浏览器: Chrome [版本]
- 设备: [设备信息]

### 修复前 (BEFORE)
[截屏或描述问题]

### 修复后 (AFTER)
[截屏或描述结果]

### 对比
- 问题是否解决: ✅ 是 / ❌ 否
- 有新问题吗: ✅ 否 / ⚠️ [描述]
- Console错误: ✅ 无 / ⚠️ [描述]

### 结论
✅ **验证通过** 或 ❌ **验证失败**

理由: [简述]
```

---

## 立即行动清单

### 今天

- [ ] 读 FAILURE_ANALYSIS_REPORT.md (15分钟)
- [ ] 读 ISSUE_31_ROOT_CAUSE_ANALYSIS.md (20分钟)
- [ ] 诊断Issue #31的实际状态 (10分钟)

**总用时**: 45分钟

### 本周

- [ ] 修复Issue #31 (根据实际情况)
- [ ] 为filterUtils.ts编写测试 (2小时)
- [ ] 补充其他Issues的Chrome验证报告 (2小时)

**总用时**: 4-5小时

### 持续

- [ ] 所有新Issues遵循新的PDCA流程
- [ ] 所有修复提交Chrome验证报告
- [ ] 没有验证报告，PR不能合并

---

## 常见问题

**Q: 这样会不会太耗时？**
A: 不会。现在每次修复失败都要重新来过，导致时间浪费更多。一次正确的验证（5-10分钟）远少于修复循环（多次重复）。

**Q: 如果问题很明显，还需要全部验证吗？**
A: 是的。Issue #31看起来修复逻辑是对的，但实际效果是错的。验证能发现这类隐蔽问题。

**Q: 如果修复很小的改动？**
A: 仍然需要。小改动也能产生大问题（副作用）。必须验证没有影响其他功能。

**Q: 如何快速生成Chrome验证报告？**
A: 使用提供的模板（复制粘贴），按照步骤走，通常5-10分钟。

---

## 关键数字

| 指标 | 当前 | 目标 |
|------|------|------|
| 修复一次成功率 | <50% | >90% |
| 客户反馈"仍有问题" | 常见 | 极少 |
| 修复循环次数 | 2-3次 | 1次 |
| Chrome验证覆盖率 | 0% | 100% |
| 单元测试覆盖 | ~30% | 70%+ |

---

## 成功的标志

### 本周末
- ✅ Issue #31真正解决了
- ✅ 其他3个Issues有完整验证报告
- ✅ filterUtils.test.ts存在

### 下一个Issue
- ✅ 修复时提交Chrome验证报告
- ✅ 报告包含BEFORE/AFTER截屏
- ✅ 首次通过Check阶段

### 一个月后
- ✅ 没有新的"修复后仍有问题"反馈
- ✅ 所有修复有验证证据
- ✅ 测试覆盖达到70%+

---

## 最重要的一点

> **代码能编译 ≠ 修复成功**
>
> **实际用户体验验证 = 真正的成功**

从现在开始，"已修复"意味着有Chrome验证报告证明问题解决。

---

## 资源

- 📄 详细分析: `FAILURE_ANALYSIS_REPORT.md`
- 📄 流程规范: `rules/production-testing-mandatory.md`
- 📄 验证规范: `rules/chrome-verification-enforcement.md`
- 📄 Issue #31诊断: `ISSUE_31_ROOT_CAUSE_ANALYSIS.md`

## 需要帮助？

1. 哪个Issue不清楚？ → 读对应的分析文档
2. 如何验证？ → 查看相应Issue类型的验证清单
3. 如何修复？ → 阅读root cause分析，选择正确的修复层级

---

*快速行动计划 | 可以开始执行了*
